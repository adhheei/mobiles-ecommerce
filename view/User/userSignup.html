<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Sign Up - Jinsa Mobiles</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />

    <script src="https://accounts.google.com/gsi/client" async defer></script>

    <style>
      body {
        background-color: #f8f9fa;
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
      }

      .logo-circle {
        width: 60px;
        height: 60px;
        border-radius: 50%;
        overflow: hidden;
        margin: 0 auto 10px;
        display: flex;
        align-items: center;
        justify-content: center;
        border: 2px solid #f0f0f0;
      }

      .logo-circle img {
        width: 100%;
        height: 100%;
        object-fit: cover;
      }

      .login-container {
        min-height: 100vh;
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 40px 20px;
      }

      .login-card {
        background: white;
        width: 100%;
        max-width: 480px;
        padding: 2.5rem;
        border-radius: 12px;
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.05);
        border: none;
        transition: transform 0.3s ease;
      }

      /* --- INPUT FIELDS --- */
      .form-control {
        border-radius: 8px;
        padding: 0.75rem 1rem;
        font-size: 0.95rem;
        border-color: #dee2e6;
        transition: border-color 0.3s ease;
      }

      .form-control:hover {
        border-color: #adb5bd;
      }

      .form-control:focus {
        box-shadow: none;
        border-color: #000;
      }

      /* --- PASSWORD ICONS --- */
      .password-toggle {
        cursor: pointer;
        color: #adb5bd;
        transition: color 0.3s ease;
      }

      .password-toggle:hover {
        color: #495057;
      }

      /* --- BUTTONS --- */
      .btn-black {
        background-color: #000;
        color: white;
        border-radius: 8px;
        padding: 0.75rem;
        font-weight: 600;
        border: none;
        transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
      }

      .btn-black:hover {
        background-color: #222;
        transform: translateY(-3px);
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
      }

      /* --- DIVIDER --- */
      .divider {
        display: flex;
        align-items: center;
        text-align: center;
        color: #adb5bd;
        margin: 1.5rem 0;
        font-size: 0.85rem;
      }
      .divider::before,
      .divider::after {
        content: "";
        flex: 1;
        border-bottom: 1px solid #dee2e6;
      }
      .divider:not(:empty)::before {
        margin-right: 0.5em;
      }
      .divider:not(:empty)::after {
        margin-left: 0.5em;
      }

      /* --- LINKS --- */
      a {
        transition: color 0.2s ease;
      }
      a:hover {
        text-decoration: underline !important;
        color: #000 !important;
      }

      /* Container for Google Button to ensure it centers */
      #google-btn-container {
          width: 100%;
          display: flex;
          justify-content: center;
      }
    </style>
  </head>
  <body>
    <div class="container-fluid login-container">
      <div class="card login-card">
        <div class="text-center mb-2">
          <div class="logo-circle">
            <img src="../../images/logo.jpg" alt="Jinsa Logo" />
          </div>
          <h3 class="fw-bold mb-1">Jinsa</h3>
          <h4 class="fw-bold mb-1">Create an Account</h4>
          <p class="text-muted small">Start your journey with us.</p>
        </div>

        <form>
          <div class="row g-3 mb-3">
            <div class="col-6">
              <label class="form-label fw-semibold small">First name</label>
              <input
                type="text"
                class="form-control"
                placeholder="Enter your first name"
              />
            </div>
            <div class="col-6">
              <label class="form-label fw-semibold small">Last name</label>
              <input
                type="text"
                class="form-control"
                placeholder="Enter your last name"
              />
            </div>
          </div>

          <div class="mb-3">
            <label class="form-label fw-semibold small">Email</label>
            <input
              type="email"
              class="form-control"
              placeholder="Enter your email"
            />
          </div>

          <div class="mb-3">
            <label class="form-label fw-semibold small">Phone number</label>
            <input
              type="tel"
              class="form-control"
              placeholder="Enter your phone number"
            />
          </div>

          <div class="mb-3">
            <label class="form-label fw-semibold small">Password</label>
            <div class="input-group">
              <input
                type="password"
                class="form-control border-end-0 password-field"
                placeholder="Enter your password"
              />
              <span class="input-group-text bg-white border-start-0">
                <i class="fa-regular fa-eye password-toggle"></i>
              </span>
            </div>
          </div>

          <div class="mb-4">
            <label class="form-label fw-semibold small">Confirm password</label>
            <div class="input-group">
              <input
                type="password"
                class="form-control border-end-0 password-field"
                placeholder="Confirm your password"
              />
              <span class="input-group-text bg-white border-start-0">
                <i class="fa-regular fa-eye password-toggle"></i>
              </span>
            </div>
          </div>

          <a href=""><button type="button" class="btn btn-black w-100 mb-3">
            Create Account
          </button></a>

          <div class="divider">Or continue with</div>

          <div id="google-btn-container" class="mb-4"></div>

          <div class="text-center">
            <p class="small text-muted mb-2">
              Already have an account?
              <a
                href="userLogin.html"
                class="text-dark fw-bold text-decoration-none"
                >Log in</a
              >
            </p>
            <p class="text-muted" style="font-size: 0.7rem">
              By creating an account, you agree to our
              <a href="#" class="text-dark text-decoration-none"
                >Terms of Service</a
              >
              and
              <a href="#" class="text-dark text-decoration-none"
                >Privacy Policy</a
              >.
            </p>
          </div>
        </form>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <script>
      // 1. Password Visibility Toggle Script
      const toggleButtons = document.querySelectorAll(".password-toggle");

      toggleButtons.forEach((button) => {
        button.addEventListener("click", function () {
          // Find the input element associated with this specific icon
          const input = this.closest(".input-group").querySelector("input");

          if (input) {
            const type =
              input.getAttribute("type") === "password" ? "text" : "password";
            input.setAttribute("type", type);

            // Toggle Icon
            this.classList.toggle("fa-eye-slash");
            this.classList.toggle("fa-eye");
          }
        });
      });

      // 2. GOOGLE LOGIN SCRIPT
      function handleCredentialResponse(response) {
            console.log("Encoded JWT ID token: " + response.credential);
            
            // Decode for demonstration
            const responsePayload = decodeJwtResponse(response.credential);
            
            console.log("ID: " + responsePayload.sub);
            console.log("Name: " + responsePayload.name);
            console.log("Email: " + responsePayload.email);
            
            // Redirect or show success (You would normally send token to backend here)
            alert(`Welcome ${responsePayload.name}! Account created.`);
        }

        // Helper function to decode JWT
        function decodeJwtResponse(token) {
            var base64Url = token.split('.')[1];
            var base64 = base64Url.replace(/-/g, '+').replace(/_/g, '/');
            var jsonPayload = decodeURIComponent(window.atob(base64).split('').map(function(c) {
                return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);
            }).join(''));
            return JSON.parse(jsonPayload);
        }

        window.onload = function () {
            google.accounts.id.initialize({
                client_id: "YOUR_GOOGLE_CLIENT_ID", // TODO: Replace with your actual Google Client ID
                callback: handleCredentialResponse
            });
            
            // Render the Google button inside the container
            google.accounts.id.renderButton(
                document.getElementById("google-btn-container"),
                { 
                    theme: "outline", 
                    size: "large", 
                    width: "420", // Matches the max-width of inputs roughly
                    text: "signup_with", // Displays "Sign up with Google"
                    shape: "pill" 
                } 
            );
            
            google.accounts.id.prompt(); 
        }
    </script>
  </body>
</html>